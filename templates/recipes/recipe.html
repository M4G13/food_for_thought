{% extends 'recipes/base.html' %}
{% load staticfiles %}


{% block body_block %}
<div class="container justify-content-md-center">
    <div class="text-center mb-3">
        <h2 class="text-center">{{ recipe.title }}</h2>
        Author: <a href = "{% url 'recipes:show_non_user_account' recipe.author.id %}">{{ recipe.author }}</a>
    </div>
    <div class="row" >
        <div class="col">
            <img src="{{ recipe.image.url }}" alt="{{ recipe.title }} image" class="img-thumbnail float-end">
        </div>

        <div class="col">
            <ul class="list-group">
                {% if categories %}
                     <li class="list-group-item">Category: <a href="{% url 'recipes:show_category' category.slug %}">{{ category.name }}</a></li>
                {% else %}
                     <li class="list-group-item disabled">Category: None</li>
                {% endif %}
                <li class="list-group-item">Serves: {{ recipe.servings }}</li>
                <li class="list-group-item">Cooking Time: {{ recipe.cooking_time }}</li>
                <li class="list-group-item">Tags: {{ recipe.tags }}</li>
                <li class="list-group-item">Average Rating: {{ average_rating|floatformat:"1" }}</li>
            </ul>
        </div>
    </div>

    <dl class="row justify-content-md-center"">
    <dt class="col-sm-3 h3">Ingredients</dt>
    <dd class="col-sm-9">{{ recipe.ingredients }}</dd>

    <dt class="col-sm-3 h3">Method</dt>
    <dd class="col-sm-9">{{ recipe.content }}</dd>
    </dl>
</div>

{% if review_form %}
<div>
    <form id="review_form" method="POST" action="{% url 'recipes:show_recipe' recipe.author.id recipe.slug %}">
        {% csrf_token %}
        <div class="mb-3 input-group">
            Review: 
            <input class="form-check-input" type="radio" name="rating" value="1" />
            <input class="form-check-input" type="radio" name="rating" value="2" />
            <input class="form-check-input" type="radio" name="rating" value="3" />
            <input class="form-check-input" type="radio" name="rating" value="4" />
            <input class="form-check-input" type="radio" name="rating" value="5" />
        </div>
        <div class="mb-3">
            Comment: <textarea class="form-control" name="content" maxlength="1000"></textarea>
        </div>
        <input class="btn btn-primary" type="submit" name="submit" value="Post review" />
    </form>
</div>
{% endif %}
{% for review in reviews %}
<div class="card mb-3">
    <div class="card-body">
        <img src="{{ review.author.userprofile.picture.url }}">
        <h5 class="card-title"><a href="{% url 'recipes:show_non_user_account' review.author.id %}">{{ review.author.username }}</a></h5>
        <h6 class="card-subtitle mb-2 text-muted"><i class="bi bi-star-fill text-warning"></i> {{ review.rating }}</h6>
        <p class="card-text">{{ review.content }}</p>
    </div>
</div>
{% endfor %}
{% endblock %}
